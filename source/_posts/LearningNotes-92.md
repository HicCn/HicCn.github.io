---
title: 帧同步设计
date: 2024-07-07 02:16:08
tags:
    - 游戏开发
    - 编程
---
## 为什么需要帧同步
- 对于网络游戏天然需要一个同步策略
- 帧同步能网络延迟带来的操作反馈不及时

## 对比其他同步策略
|同步策略|传输内容|逻辑计算|断线重连|回放/观战|
|---|---|---|---|---|
|帧同步|操作|客户端|逐帧快进|天然支持|
|状态同步|结果|服务端|等待下次同步|额外实现|

## 基本的网络知识
### 网络延迟
### 数据传输

## 帧同步
### 核心设计
- 逻辑与表现分离
- 依赖状态（状态计算）（借鉴状态同步的策略）
  - 老状态 + 新输入 = 新状态
  - 抽离系统的输入输出（内部/外部）,确保仅有外部产生输入时，才会改变状态
  - 数据快照
### 冲突的解决思路
冲突基本发生在
- 预测
  - 服务端输入总是在客户端之后，只有服务端输入与客户端输入不同时才需要解决冲突
- 和解
- 插值

https://github.com/YouRenJee/LockstepFundation
https://github.com/Tencent/xLua/issues/834
